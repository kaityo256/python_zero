<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
                <title>answer/index.md</title>
    <style type="text/css">
      code {
        white-space: pre;
      }
    </style>
        <style type="text/css">
      div.sourceCode {
        overflow-x: auto;
      }

      table.sourceCode,
      tr.sourceCode,
      td.lineNumbers,
      td.sourceCode {
        margin: 0;
        padding: 0;
        vertical-align: baseline;
        border: none;
      }

      table.sourceCode {
        width: 100%;
        line-height: 100%;
      }

      td.lineNumbers {
        text-align: right;
        padding-right: 4px;
        padding-left: 4px;
        color: #aaaaaa;
        border-right: 1px solid #aaaaaa;
      }

      td.sourceCode {
        padding-left: 5px;
      }

      code>span.kw {
        color: #007020;
        font-weight: bold;
      }

      /* Keyword */
      code>span.dt {
        color: #902000;
      }

      /* DataType */
      code>span.dv {
        color: #40a070;
      }

      /* DecVal */
      code>span.bn {
        color: #40a070;
      }

      /* BaseN */
      code>span.fl {
        color: #40a070;
      }

      /* Float */
      code>span.ch {
        color: #4070a0;
      }

      /* Char */
      code>span.st {
        color: #4070a0;
      }

      /* String */
      code>span.co {
        color: #60a0b0;
        font-style: italic;
      }

      /* Comment */
      code>span.ot {
        color: #007020;
      }

      /* Other */
      code>span.al {
        color: #ff0000;
        font-weight: bold;
      }

      /* Alert */
      code>span.fu {
        color: #06287e;
      }

      /* Function */
      code>span.er {
        color: #ff0000;
        font-weight: bold;
      }

      /* Error */
      code>span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      }

      /* Warning */
      code>span.cn {
        color: #880000;
      }

      /* Constant */
      code>span.sc {
        color: #4070a0;
      }

      /* SpecialChar */
      code>span.vs {
        color: #4070a0;
      }

      /* VerbatimString */
      code>span.ss {
        color: #bb6688;
      }

      /* SpecialString */
      code>span.va {
        color: #19177c;
      }

      /* Variable */
      code>span.cf {
        color: #007020;
        font-weight: bold;
      }

      /* ControlFlow */
      code>span.op {
        color: #666666;
      }

      /* Operator */
      code>span.pp {
        color: #bc7a00;
      }

      /* Preprocessor */
      code>span.at {
        color: #7d9029;
      }

      /* Attribute */
      code>span.do {
        color: #ba2121;
        font-style: italic;
      }

      /* Documentation */
      code>span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      }

      /* Annotation */
      code>span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      }

      /* CommentVar */
      code>span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      }

      /* Information */
    </style>

    <style>
      .btn-square {
        display: inline-block;
        padding: 0.5em 0.5em;
        text-decoration: none;
        background: #668ad8;
        color: #FFF;
        border-bottom: solid 4px #626295;
        border-radius: 5px;
      }

      .btn-square:active {
        -webkit-transform: translateY(4px);
        transform: translateY(4px);
        border-bottom: none;
      }

      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      }

      p.caption {
        display: none;
      }

      img {
        width: 100%
      }



      @media (max-width: 767px) {
        .markdown-body {
          padding: 15px;
        }
      }
    </style>
    <link rel="stylesheet" href="https://kaityo256.github.io/python_zero/github-markdown.css" type="text/css" />

    <meta name="viewport" content="width=device-width, initial-scale=1">

        <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
        <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
  </head>

  <body>
    <article class="markdown-body">
                        <h1 id="略解と解説">略解と解説</h1>
<p><a href="../index.html">[Up]</a> <a href="https://github.com/kaityo256/python_zero">[Repository]</a></p>
<h2 id="第1章">第1章</h2>
<h3 id="発展課題">発展課題</h3>
<p>六芒星の描画。</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1">img <span class="op">=</span> Image.new(<span class="st">&quot;L&quot;</span>, (<span class="dv">256</span>, <span class="dv">256</span>), <span class="dv">255</span>)</a>
<a class="sourceLine" id="cb1-2" title="2">draw <span class="op">=</span> ImageDraw.Draw(img)</a>
<a class="sourceLine" id="cb1-3" title="3">cx <span class="op">=</span> <span class="dv">128</span></a>
<a class="sourceLine" id="cb1-4" title="4">cy <span class="op">=</span> <span class="dv">128</span></a>
<a class="sourceLine" id="cb1-5" title="5">r <span class="op">=</span> <span class="dv">96</span></a>
<a class="sourceLine" id="cb1-6" title="6">draw.ellipse((cx <span class="op">-</span> r, cy <span class="op">-</span> r, cx <span class="op">+</span> r, cy <span class="op">+</span> r))</a>
<a class="sourceLine" id="cb1-7" title="7">N <span class="op">=</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb1-8" title="8">s <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> pi <span class="op">/</span> N</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</a>
<a class="sourceLine" id="cb1-10" title="10">    s1 <span class="op">=</span> s<span class="op">*</span>i <span class="op">-</span> <span class="fl">0.5</span> <span class="op">*</span> pi</a>
<a class="sourceLine" id="cb1-11" title="11">    s2 <span class="op">=</span> s1 <span class="op">+</span> s <span class="op">*</span> k</a>
<a class="sourceLine" id="cb1-12" title="12">    x1 <span class="op">=</span> r <span class="op">*</span> cos(s1) <span class="op">+</span> cx</a>
<a class="sourceLine" id="cb1-13" title="13">    y1 <span class="op">=</span> r <span class="op">*</span> sin(s1) <span class="op">+</span> cy</a>
<a class="sourceLine" id="cb1-14" title="14">    x2 <span class="op">=</span> r <span class="op">*</span> cos(s2) <span class="op">+</span> cx</a>
<a class="sourceLine" id="cb1-15" title="15">    y2 <span class="op">=</span> r <span class="op">*</span> sin(s2) <span class="op">+</span> cy</a>
<a class="sourceLine" id="cb1-16" title="16">    draw.line((x1, y1, x2, y2))</a>
<a class="sourceLine" id="cb1-17" title="17">    s1 <span class="op">=</span> s<span class="op">*</span>(i<span class="fl">+0.5</span>) <span class="op">-</span> <span class="fl">0.5</span> <span class="op">*</span> pi</a>
<a class="sourceLine" id="cb1-18" title="18">    s2 <span class="op">=</span> s1 <span class="op">+</span> s <span class="op">*</span> k</a>
<a class="sourceLine" id="cb1-19" title="19">    x1 <span class="op">=</span> r <span class="op">*</span> cos(s1) <span class="op">+</span> cx</a>
<a class="sourceLine" id="cb1-20" title="20">    y1 <span class="op">=</span> r <span class="op">*</span> sin(s1) <span class="op">+</span> cy</a>
<a class="sourceLine" id="cb1-21" title="21">    x2 <span class="op">=</span> r <span class="op">*</span> cos(s2) <span class="op">+</span> cx</a>
<a class="sourceLine" id="cb1-22" title="22">    y2 <span class="op">=</span> r <span class="op">*</span> sin(s2) <span class="op">+</span> cy</a>
<a class="sourceLine" id="cb1-23" title="23">    draw.line((x1, y1, x2, y2))</a></code></pre></div>
<h2 id="第2章">第2章</h2>
<h3 id="課題2">課題2</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">def</span> plot(draw, s):</a>
<a class="sourceLine" id="cb2-2" title="2">    hs <span class="op">=</span> s <span class="op">//</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb2-3" title="3">    red <span class="op">=</span> (<span class="dv">255</span>, <span class="dv">0</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb2-4" title="4">    green <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">255</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb2-5" title="5">    blue <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">255</span>)</a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(s):</a>
<a class="sourceLine" id="cb2-7" title="7">        <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(s):</a>
<a class="sourceLine" id="cb2-8" title="8">            z <span class="op">=</span> <span class="bu">complex</span>(x <span class="op">-</span> hs <span class="op">+</span> <span class="fl">0.5</span>, <span class="op">-</span>y <span class="op">+</span> hs <span class="op">+</span> <span class="fl">0.5</span>) <span class="op">/</span> s <span class="op">*</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb2-9" title="9">            z <span class="op">=</span> newton(z)</a>
<a class="sourceLine" id="cb2-10" title="10">            <span class="co"># ここを埋めよ</span></a>
<a class="sourceLine" id="cb2-11" title="11">            <span class="cf">if</span> z.real <span class="op">&gt;</span> <span class="fl">0.0</span>:</a>
<a class="sourceLine" id="cb2-12" title="12">              c <span class="op">=</span> red</a>
<a class="sourceLine" id="cb2-13" title="13">            <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb2-14" title="14">              <span class="cf">if</span> z.imag <span class="op">&gt;</span> <span class="fl">0.0</span>:</a>
<a class="sourceLine" id="cb2-15" title="15">                c <span class="op">=</span> green</a>
<a class="sourceLine" id="cb2-16" title="16">              <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb2-17" title="17">                c <span class="op">=</span> blue</a>
<a class="sourceLine" id="cb2-18" title="18">            draw.rectangle([x, y, x <span class="op">+</span> <span class="dv">1</span>, y <span class="op">+</span> <span class="dv">1</span>], fill<span class="op">=</span>c)</a></code></pre></div>
<h3 id="発展課題-1">発展課題</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">def</span> newton(x):</a>
<a class="sourceLine" id="cb3-2" title="2">    <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</a>
<a class="sourceLine" id="cb3-3" title="3">        x <span class="op">=</span> x <span class="op">-</span> (x<span class="op">**</span><span class="dv">4</span> <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> (<span class="dv">4</span> <span class="op">*</span> x<span class="op">**</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="cf">return</span> x</a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="kw">def</span> plot(draw, s):</a>
<a class="sourceLine" id="cb3-7" title="7">    hs <span class="op">=</span> s <span class="op">//</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb3-8" title="8">    red <span class="op">=</span> (<span class="dv">255</span>, <span class="dv">0</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb3-9" title="9">    green <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">255</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb3-10" title="10">    blue <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">255</span>)</a>
<a class="sourceLine" id="cb3-11" title="11">    purple <span class="op">=</span> (<span class="dv">255</span>, <span class="dv">0</span> ,<span class="dv">255</span>)</a>
<a class="sourceLine" id="cb3-12" title="12">    <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(s):</a>
<a class="sourceLine" id="cb3-13" title="13">        <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(s):</a>
<a class="sourceLine" id="cb3-14" title="14">            z <span class="op">=</span> <span class="bu">complex</span>(x <span class="op">-</span> hs <span class="op">+</span> <span class="fl">0.5</span>, <span class="op">-</span>y <span class="op">+</span> hs <span class="op">+</span> <span class="fl">0.5</span>) <span class="op">/</span> s <span class="op">*</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb3-15" title="15">            z <span class="op">=</span> newton(z)</a>
<a class="sourceLine" id="cb3-16" title="16">            <span class="co"># ここを埋めよ</span></a>
<a class="sourceLine" id="cb3-17" title="17">            <span class="cf">if</span> z.real <span class="op">+</span> z.imag <span class="op">&gt;</span> <span class="fl">0.0</span>:</a>
<a class="sourceLine" id="cb3-18" title="18">              <span class="cf">if</span> z.real <span class="op">-</span> z.imag <span class="op">&gt;</span> <span class="fl">0.0</span>:</a>
<a class="sourceLine" id="cb3-19" title="19">                c <span class="op">=</span> red</a>
<a class="sourceLine" id="cb3-20" title="20">              <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb3-21" title="21">                c <span class="op">=</span> purple</a>
<a class="sourceLine" id="cb3-22" title="22">            <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb3-23" title="23">              <span class="cf">if</span> z.real <span class="op">-</span> z.imag <span class="op">&gt;</span> <span class="fl">0.0</span>:</a>
<a class="sourceLine" id="cb3-24" title="24">                c <span class="op">=</span> green</a>
<a class="sourceLine" id="cb3-25" title="25">              <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb3-26" title="26">                c <span class="op">=</span> blue</a>
<a class="sourceLine" id="cb3-27" title="27">            draw.rectangle([x, y, x <span class="op">+</span> <span class="dv">1</span>, y <span class="op">+</span> <span class="dv">1</span>], fill<span class="op">=</span>c)</a></code></pre></div>
<h2 id="第3章">第3章</h2>
<h3 id="課題2-1">課題2</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">def</span> collatz(i):</a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="bu">print</span>(i)</a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="cf">while</span> (i<span class="op">!=</span><span class="dv">1</span>):</a>
<a class="sourceLine" id="cb4-4" title="4">        <span class="cf">if</span> (i<span class="op">%</span><span class="dv">2</span><span class="op">==</span><span class="dv">0</span>):</a>
<a class="sourceLine" id="cb4-5" title="5">            i <span class="op">=</span> i <span class="op">//</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb4-6" title="6">        <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb4-7" title="7">            i <span class="op">=</span> i <span class="op">*</span> <span class="dv">3</span> <span class="op">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb4-8" title="8">        <span class="bu">print</span>(i)</a></code></pre></div>
<h3 id="発展課題-2">発展課題</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">def</span> collatz_graph(i, edges):</a>
<a class="sourceLine" id="cb5-2" title="2">    <span class="cf">while</span> (i<span class="op">!=</span><span class="dv">1</span> <span class="kw">and</span> i<span class="op">!=</span><span class="dv">3</span>):</a>
<a class="sourceLine" id="cb5-3" title="3">        j <span class="op">=</span> i</a>
<a class="sourceLine" id="cb5-4" title="4">        <span class="cf">if</span> (i<span class="op">%</span><span class="dv">2</span><span class="op">==</span><span class="dv">0</span>):</a>
<a class="sourceLine" id="cb5-5" title="5">            i <span class="op">=</span> i <span class="op">//</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb5-6" title="6">        <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb5-7" title="7">            i <span class="op">=</span> i <span class="op">*</span> <span class="dv">3</span> <span class="op">+</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb5-8" title="8">        edges.add((j, i))</a></code></pre></div>
<h2 id="第7章">第7章</h2>
<h3 id="課題1-1">課題1-1</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">def</span> kaidan(n):</a>
<a class="sourceLine" id="cb6-2" title="2">    <span class="co"># 終端条件</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="cf">if</span> n<span class="op">==</span><span class="dv">1</span>:</a>
<a class="sourceLine" id="cb6-4" title="4">        <span class="cf">return</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="cf">if</span> n<span class="op">==</span><span class="dv">2</span>:</a>
<a class="sourceLine" id="cb6-6" title="6">        <span class="cf">return</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="co"># 再帰部分</span></a>
<a class="sourceLine" id="cb6-8" title="8">    <span class="cf">return</span> kaidan(n<span class="dv">-1</span>)<span class="op">+</span>kaidan(n<span class="dv">-2</span>)</a></code></pre></div>
<h3 id="課題2-1-1">課題2-1</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">def</span> solve(x, y, step, maze):</a>
<a class="sourceLine" id="cb7-2" title="2">    <span class="cf">if</span> maze[x][y] <span class="op">==</span> <span class="st">&#39;*&#39;</span>:</a>
<a class="sourceLine" id="cb7-3" title="3">        <span class="cf">return</span></a>
<a class="sourceLine" id="cb7-4" title="4">    <span class="cf">if</span> <span class="bu">isinstance</span>(maze[x][y], <span class="bu">int</span>):</a>
<a class="sourceLine" id="cb7-5" title="5">        <span class="cf">return</span></a>
<a class="sourceLine" id="cb7-6" title="6">    maze[x][y] <span class="op">=</span> step</a>
<a class="sourceLine" id="cb7-7" title="7">    solve(x<span class="op">+</span><span class="dv">1</span>, y, step<span class="op">+</span><span class="dv">1</span>, maze) <span class="co"># 右を探索</span></a>
<a class="sourceLine" id="cb7-8" title="8">    <span class="co"># 残りを埋めよ</span></a>
<a class="sourceLine" id="cb7-9" title="9">    solve(x<span class="dv">-1</span>, y, step<span class="op">+</span><span class="dv">1</span>, maze)</a>
<a class="sourceLine" id="cb7-10" title="10">    solve(x, y<span class="op">+</span><span class="dv">1</span>, step<span class="op">+</span><span class="dv">1</span>, maze)</a>
<a class="sourceLine" id="cb7-11" title="11">    solve(x, y<span class="dv">-1</span>, step<span class="op">+</span><span class="dv">1</span>, maze)</a></code></pre></div>
<h2 id="第9章">第9章</h2>
<p>そのまま実行すると、以下のように画像のところどころに黒い点が現れる「黒飛び」が発生する。</p>
<figure>
<img src="fig/numpy_without_clip.png" alt="黒飛びのある画像" /><figcaption>黒飛びのある画像</figcaption>
</figure>
<p>近似画像の「黒飛び」が発生するのは、画像のピクセルの値が0から255の範囲から超えてしまうためだ。関数<code>svd</code>において、近似値を構成しているところで、以下のように最小値と最大値を指定してやると「黒飛び」がなくなる。</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" title="1">    b <span class="op">=</span> np.asarray(ur <span class="op">*</span> sr <span class="op">*</span> vr)</a>
<a class="sourceLine" id="cb8-2" title="2">    b <span class="op">=</span> np.clip(b, <span class="dv">0</span>,<span class="dv">255</span>)        <span class="co"># 最小値と最大値を指定</span></a></code></pre></div>
<figure>
<img src="fig/numpy_with_clip.png" alt="黒飛びのない画像" /><figcaption>黒飛びのない画像</figcaption>
</figure>
<p>講義では「なぜ黒飛びが発生するか」を考察させると良い。</p>
<h2 id="第10章">第10章</h2>
<h3 id="課題2-2">課題2-2</h3>
<p>電卓に乗除算を追加する。</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">def</span> calc(code):</a>
<a class="sourceLine" id="cb9-2" title="2">    data <span class="op">=</span> code.split()</a>
<a class="sourceLine" id="cb9-3" title="3">    stack <span class="op">=</span> []</a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="cf">for</span> x <span class="kw">in</span> data:</a>
<a class="sourceLine" id="cb9-5" title="5">        <span class="bu">print</span>(stack, x, end<span class="op">=</span><span class="st">&quot; =&gt; &quot;</span>)</a>
<a class="sourceLine" id="cb9-6" title="6">        <span class="cf">if</span> x <span class="op">==</span> <span class="st">&#39;+&#39;</span>:</a>
<a class="sourceLine" id="cb9-7" title="7">            b <span class="op">=</span> stack.pop()</a>
<a class="sourceLine" id="cb9-8" title="8">            a <span class="op">=</span> stack.pop()</a>
<a class="sourceLine" id="cb9-9" title="9">            stack.append(a<span class="op">+</span>b)</a>
<a class="sourceLine" id="cb9-10" title="10">        <span class="cf">elif</span> x <span class="op">==</span> <span class="st">&#39;-&#39;</span>:</a>
<a class="sourceLine" id="cb9-11" title="11">            b <span class="op">=</span> stack.pop()</a>
<a class="sourceLine" id="cb9-12" title="12">            a <span class="op">=</span> stack.pop()</a>
<a class="sourceLine" id="cb9-13" title="13">            stack.append(a<span class="op">-</span>b)</a>
<a class="sourceLine" id="cb9-14" title="14">        <span class="co"># 以下を追加</span></a>
<a class="sourceLine" id="cb9-15" title="15">        <span class="cf">elif</span> x <span class="op">==</span> <span class="st">&#39;*&#39;</span>:</a>
<a class="sourceLine" id="cb9-16" title="16">            b <span class="op">=</span> stack.pop()</a>
<a class="sourceLine" id="cb9-17" title="17">            a <span class="op">=</span> stack.pop()</a>
<a class="sourceLine" id="cb9-18" title="18">            stack.append(a<span class="op">*</span>b)</a>
<a class="sourceLine" id="cb9-19" title="19">        <span class="cf">elif</span> x <span class="op">==</span> <span class="st">&#39;/&#39;</span>:</a>
<a class="sourceLine" id="cb9-20" title="20">            b <span class="op">=</span> stack.pop()</a>
<a class="sourceLine" id="cb9-21" title="21">            a <span class="op">=</span> stack.pop()</a>
<a class="sourceLine" id="cb9-22" title="22">            stack.append(a<span class="op">//</span>b)</a>
<a class="sourceLine" id="cb9-23" title="23">        <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb9-24" title="24">            stack.append(<span class="bu">int</span>(x))</a>
<a class="sourceLine" id="cb9-25" title="25">        <span class="bu">print</span>(stack)</a>
<a class="sourceLine" id="cb9-26" title="26">    <span class="bu">print</span>(stack.pop())</a></code></pre></div>
<h3 id="発展課題-3">発展課題</h3>
<p>例えば「1 + 2 * 3 - 4」の例であれば、まず以下を実行する。</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb10-1" title="1">dis.dis(<span class="st">&quot;a + b * c - d&quot;</span>)</a></code></pre></div>
<p>すると、以下のような結果が得られる。</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb11-1" title="1">  1           0 LOAD_NAME                0 (a)</a>
<a class="sourceLine" id="cb11-2" title="2">              2 LOAD_NAME                1 (b)</a>
<a class="sourceLine" id="cb11-3" title="3">              4 LOAD_NAME                2 (c)</a>
<a class="sourceLine" id="cb11-4" title="4">              6 BINARY_MULTIPLY</a>
<a class="sourceLine" id="cb11-5" title="5">              8 BINARY_ADD</a>
<a class="sourceLine" id="cb11-6" title="6">             10 LOAD_NAME                3 (d)</a>
<a class="sourceLine" id="cb11-7" title="7">             12 BINARY_SUBTRACT</a>
<a class="sourceLine" id="cb11-8" title="8">             14 RETURN_VALUE</a></code></pre></div>
<p>これを見ながら、逆ポーランド記法を組み立てる。<code>LOAD_NAME</code>はそのまま値を、<code>BINARY_MULITPLY</code>は乗算記号<code>*</code>をと書いていくと<code>1 2 3 * + 4 -</code>という文字列を作ることができる。「電卓」に入力してみると</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb12-1" title="1">calc(<span class="st">&quot;1 2 3 * + 4 -&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb13-1" title="1">[] 1 =&gt; [1]</a>
<a class="sourceLine" id="cb13-2" title="2">[1] 2 =&gt; [1, 2]</a>
<a class="sourceLine" id="cb13-3" title="3">[1, 2] 3 =&gt; [1, 2, 3]</a>
<a class="sourceLine" id="cb13-4" title="4">[1, 2, 3] * =&gt; [1, 6]</a>
<a class="sourceLine" id="cb13-5" title="5">[1, 6] + =&gt; [7]</a>
<a class="sourceLine" id="cb13-6" title="6">[7] 4 =&gt; [7, 4]</a>
<a class="sourceLine" id="cb13-7" title="7">[7, 4] - =&gt; [3]</a>
<a class="sourceLine" id="cb13-8" title="8">3</a></code></pre></div>
<p>と、正しい答え3が得られる。「(1 + 2 * 3) / 4」の場合も同様。</p>
<h2 id="第12章">第12章</h2>
<h3 id="課題1">課題1</h3>
<p>最初に選んだ箱が正解だった場合は、残りの箱からランダムに選ぶので、</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb14-1" title="1">      second_choice <span class="op">=</span> choice(rest_boxes) <span class="co"># ここを埋めよ(1)</span></a></code></pre></div>
<p>また、最初に選んだ箱が正解ではなかった場合は、次に選ぶ箱は必ず正解になるので</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb15-1" title="1">      second_choice <span class="op">=</span> answer <span class="co"># ここを埋めよ(2)</span></a></code></pre></div>
<h3 id="課題2-3">課題2</h3>
<p>左から右に通行可能な確率は、道路の通行可能確率pが0.5より小さいとほとんどゼロ、0.5より大きいとほぼ1という、ステップ関数のような関数になる。このように、パラメタを変えた時、あるところで系の状態が劇的に変化する現象を相転移と呼ぶ。パーコレーションは相転移を起こす最も簡単なモデルの一つである。</p>
<h3 id="発展課題-4">発展課題</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">def</span> gacha(n):</a>
<a class="sourceLine" id="cb16-2" title="2">    cd <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb16-3" title="3">    posters <span class="op">=</span> []</a>
<a class="sourceLine" id="cb16-4" title="4">    <span class="cf">while</span> <span class="bu">len</span>(<span class="bu">set</span>(posters)) <span class="op">&lt;</span> n:</a>
<a class="sourceLine" id="cb16-5" title="5">        posters.append(random.randint(<span class="dv">1</span>, n))</a>
<a class="sourceLine" id="cb16-6" title="6">        cd <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb16-7" title="7">    <span class="cf">return</span> cd</a></code></pre></div>
<h2 id="第13章">第13章</h2>
<h3 id="課題2-4">課題2</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb17-1" title="1"><span class="at">@jit</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="kw">def</span> laplacian(m, n, s):</a>
<a class="sourceLine" id="cb17-3" title="3">    ts <span class="op">=</span> <span class="fl">0.0</span></a>
<a class="sourceLine" id="cb17-4" title="4">    ts <span class="op">+=</span> s[m<span class="op">+</span><span class="dv">1</span>][n]</a>
<a class="sourceLine" id="cb17-5" title="5">    ts <span class="op">+=</span> s[m<span class="dv">-1</span>][n]</a>
<a class="sourceLine" id="cb17-6" title="6">    ts <span class="op">+=</span> s[m][n<span class="op">+</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb17-7" title="7">    ts <span class="op">+=</span> s[m][n<span class="dv">-1</span>]</a>
<a class="sourceLine" id="cb17-8" title="8">    <span class="co"># ここを埋めよ</span></a>
<a class="sourceLine" id="cb17-9" title="9">    ts <span class="op">-=</span> <span class="dv">4</span><span class="op">*</span>s[m][n]</a>
<a class="sourceLine" id="cb17-10" title="10">    <span class="cf">return</span> ts</a></code></pre></div>
          </article>
  </body>

  </html>